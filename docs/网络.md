# 网络

> https://mp.weixin.qq.com/s/t7ZYT6wBBbFYVBPOSztpRg

------

[TOC]

## 1.HTTP超文本传输协议

https://mp.weixin.qq.com/s/AK1Pb9rx0q5Hf8dq6HNOhw

HTTP的出现是为了接收和发布HTML页面，经过不断的发展也可以用于接收一些音频，视频，文件等内容。

**HTTP协议是用于客户端和服务器端之间的通信**，用于客户端和服务器端之间的通信有HTTP协议和TCP/IP协议在内的其他众多的协议。

**Client客户端请求Server服务端，Server服务端响应给Client客户端。**HTTP是基于客户端/服务端的架构模型，浏览器或其他任何客户端都可以用HTTP协议的，通过URL地址向HTTP的服务器即Web服务器发送所有请求，Web服务器端在接收到请求后会做出反应，响应给对方，就是向客户端回传响应的信息。

**HTTP超文本传输协议是一个基于请求与响应模式的，无状态的，基于TCP/IP协议的应用层协议。**

**常见的HTTP相应状态码:**

- 200：请求被正常处理
- 204：请求被受理但没有资源可以返回
- 206：客户端只是请求资源的一部分，服务器只对请求的部分资源执行GET方法，相应报文中通过Content-Range指定范围的资源。
- 301：永久性重定向
- 302：临时重定向
- 303：与302状态码有相似功能，只是它希望客户端在请求一个URI的时候，能通过GET方法重定向到另一个URI上
- 304：发送附带条件的请求时，条件不满足时返回，与重定向无关
- 307：临时重定向，与302类似，只是强制要求使用POST方法
- 400：请求报文语法有误，服务器无法识别
- 401：请求需要认证
- 403：请求的对应资源禁止被访问
- 404：服务器无法找到对应资源
- 405：请求方式不正确，表示客户端发出了一个不被允许的HTTP请求方法，例如使用POST请求访问只支持GET请求的资源
- 500：服务器内部错误
- 503：服务器正忙

TCP/IP 网络模型，一般是五层模型:

![](https://note.youdao.com/yws/api/personal/file/FF534A3F22214CFE8E0D0A260C94BEEC?method=download&shareKey=52a4f33d31e99619958f5224c1fe54b0)

TCP/IP网络模型是指TCP/IP协议栈中的四层协议体系，包括以下四个层次：

1. 应用层（Application Layer）：负责处理网络应用程序之间的通信，包括HTTP、FTP、SMTP等。
2. 传输层（Transport Layer）：负责处理端到端的数据传输，包括TCP和UDP协议。其中TCP提供可靠的、面向连接的数据传输服务，UDP提供不可靠的、无连接的数据传输服务。
3. 网络层（Network Layer）：负责处理网络地址的分配和路由选择，包括IP协议。其中IP协议负责为数据包分配IP地址，并将数据包从源地址传输到目标地址。
4. 数据链路层（Data Link Layer）：负责处理物理网络之间的数据传输，包括Ethernet、Wi-Fi等协议。数据链路层将数据包转换为物理层可以理解的信号，并在物理层上将数据包发送到目标设备。

## 2.HTTPS超文本传输安全协议

> https://mp.weixin.qq.com/s/21JaXwdfSjItj5SgOwhapg

**HTTPS 就是身披了一层 SSL 的 HTTP,HTTPS更加安全**。

![](https://note.youdao.com/yws/api/personal/file/D2485CD878DD4AAFAA30894F719B3F1A?method=download&shareKey=8c76d15866dc8795558dbe214612ccde)

HTTPS工作过程：

![](https://note.youdao.com/yws/api/personal/file/C44E7108FD7D46FBB6C90A167E542EB7?method=download&shareKey=e7e2dca61f95148ef0c5f7e98aa7c66d)

1. 用户在浏览器发起HTTPS请求（如 https://www.mogu.com/），默认使用服务端的443端口进行连接；
2. HTTPS需要使用一套**CA数字证书**，证书内会附带一个**公钥Pub**，而与之对应的**私钥Private**保留在服务端不公开；
3. 服务端收到请求，返回配置好的包含**公钥Pub**的证书给客户端；
4. 客户端收到**证书**，校验合法性，主要包括是否在有效期内、证书的域名与请求的域名是否匹配，上一级证书是否有效（递归判断，直到判断到系统内置或浏览器配置好的根证书），如果不通过，则显示HTTPS警告信息，如果通过则继续；
5. 客户端生成一个用于对称加密的**随机Key**，并用证书内的**公钥Pub**进行加密，发送给服务端；
6. 服务端收到**随机Key**的密文，使用与**公钥Pub**配对的**私钥Private**进行解密，得到客户端真正想发送的**随机Key**；
7. 服务端使用客户端发送过来的**随机Key**对要传输的HTTP数据进行对称加密，将密文返回客户端；
8. 客户端使用**随机Key**对称解密密文，得到HTTP数据明文；
9. 后续HTTPS请求使用之前交换好的**随机Key**进行对称加解密。

**非对称加解密耗时要远大于对称加解密**

<font color="lighblue">非对称加密、对称加密、CA证书、数字签名</font>

**HTTPS 的出发点是解决HTTP明文传输时信息被篡改和监听的问题。**

- 为了兼顾性能和安全性，使用了非对称加密+对称加密的方案。
- 为了保证公钥传输中不被篡改，又使用了非对称加密的数字签名功能，借助CA机构和系统根证书的机制保证了HTTPS证书的公信力。

### HTTP转HTTPS

https://segmentfault.com/a/1190000022673232

## 3.TCP  和 UDP

**TCP 和 UDP 都位于计算机网络模型中的运输层，它们负责传输应用层产生的数据。**

### UDP

<font color="lighblue">UDP </font>的全称是 `User Datagram Protocol`，**用户数据报协议**。它不需要所谓的握手操作，从而加快了通信速度，允许网络上的其他主机在接收方同意通信之前进行数据传输。UDP 提供一种不可靠的数据交付，但是 UDP 具有较好的实时性，工作效率较 TCP 协议高。

UDP 的特点主要有：

- UDP 能够支持容忍数据包丢失的带宽密集型应用程序
- UDP 具有低延迟的特点
- UDP 能够发送大量的数据包
- UDP 能够允许 DNS 查找，DNS 是建立在 UDP 之上的应用层协议。

### TCP

<font color="lighblue">TCP </font>的全称是`Transmission Control Protocol` ，**传输控制协议**。它能够帮助你确定计算机连接到 Internet 以及它们之间的数据传输。通过三次握手来建立 TCP 连接，三次握手就是用来启动和确认 TCP 连接的过程。一旦连接建立后，就可以发送数据了，当数据传输完成后，会通过关闭虚拟电路来断开连接。

TCP 的主要特点有 **慢启动、拥塞控制、快速重传、可恢复**。它最大的特点就是提供**可靠的数据交付**。

TCP 的主要特点有：

- TCP 能够确保连接的建立和数据包的发送
- TCP 支持错误重传机制
- TCP 支持拥塞控制，能够在网络拥堵的情况下延迟发送
- TCP 能够提供错误校验和，甄别有害的数据包。

### TCP和UDP的区别

| 类别       | TCP      | UDP          |
| ---------- | -------- | ------------ |
| 是否连接   | 面向连接 | 面向非连接   |
| 传输可靠性 | 可靠     | 不可靠       |
| 应用场合   | 少量数据 | 传输大量数据 |
| 速度       | 慢       | 快           |

1. TCP 基于连接 UDP 无连接 
2. TCP 要求系统资源较多，UDP 较少 
3. TCP 保证数据正确性，UDP 可能丢包 
4. TCP 保证数据顺序，UDP 不保证

### TCP三次握手和四次挥手

![](https://note.youdao.com/yws/api/personal/file/5846CFD386FD455097750FAF46D81B27?method=download&shareKey=968e3d01df2981a1bba9ff2038dced1b)

![](https://note.youdao.com/yws/api/personal/file/40AF22CB083B4DE6AB5DF0C2DEA3610D?method=download&shareKey=16d67b953233688c45bdf318a37baffe)

**为什么要三次握手**

三次握手的目的是建立可靠的通信信道，说到通讯，简单来说就是数据的发送与接收，而三次握手最主要的目的就是双方确认自己与对方的发送与接收是正常的。

## 4.GET和POST区别

`Get` 方法的含义是请求**从服务器获取资源**，这个资源可以是静态的文本、页面、图片视频等。

而`POST` 方法则是相反操作，它**向 URI指定的资源提交数据**，数据就放在报文的 body 里。

* ①get请求用来从服务器上获得资源，而post是用来向服务器提交数据；
* ②get将表单中数据按照name=value的形式，添加到action 所指向的URL 后面，并且两者使用"?"连接，而各个变量之间使用"&"连接；post是将表单中的数据放在HTTP协议的请求头或消息体中，传递到action所指向URL；
* ③get传输的数据要受到URL长度限制（1024字节）；而post可以传输大量的数据，上传文件通常要使用post方式；
* ④使用get时参数会显示在地址栏上，如果这些数据不是敏感数据，那么可以使用get；对于敏感数据还是应用使用post；
* ⑤get使用MIME类型application/x-www-form-urlencoded的URL编码（也叫百分号编码）文本的格式传递参数，保证被传送的参数由遵循规范的文本组成，例如一个空格的编码是"%20"。

**GET 和 POST 方法都是安全和幂等的吗？**

先说明下安全和幂等的概念：

- 在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。
- 所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的。

那么很明显 **GET 方法就是安全且幂等的**，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。

**POST** 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是**不安全**的，且多次提交数据就会创建多个资源，所以**不是幂等**的。

## 5.cookie 和 session 的区别

**1.存储位置不同** 

* cookie 存放在客户端电脑，是一个磁盘文件。
* session 是存放在服务器内存中的一个对象。Session 是服务器端会话管理技术，并且 session 就是 cookie 实现的。 

**2.存储容量不同** 

* 单个 cookie 保存的数据<=4KB，一个站点最多保存 20 个 Cookie。
* 对于 session 来说并没有上限，但出于对服务器端的性能考虑，session内不要存放过多的东西，并且设置 session 删除机制。 

**3.存储方式不同** 

* cookie 中只能保管 ASCII 字符串，并需要通过编码方式存储为 Unicode 字符或者二进制数据。
* session 中能够存储任何类型的数据，包括且不限于 string，integer，list，map 等。 

**4.隐私策略不同** 

* cookie 对客户端是可见的，别有用心的人可以分析存放在本地的 cookie 并进行 cookie 欺骗，所以它是不安全的。 
* session 存储在服务器上，不存在敏感信息泄漏的风险。 

**5. 有效期上不同** 

* 开发可以通过设置 cookie 的属性，达到使 cookie 长期有效的效果。
* session 依赖于名为 JSESSIONID 的 cookie，而 cookie JSESSIONID 的过期时间默认为-1， 只需关闭窗口该 session 就会失效，因而 session 不能达到长期有效的效果。 

**6.服务器压力不同** 

* cookie 保管在客户端，不占用服务器资源。对于并发用户十分多的网站，cookie 是很好的选择。 
* session 是保管在服务器端的，每个用户都会产生一个 session。假如并发访问的用户十分 多，会产生十分多的 session，耗费大量的内存。 

## 6.IP协议

> https://mp.weixin.qq.com/s/p9oA9YTZLoXVooUOSNQCMg

IP 在 TCP/IP 参考模型中处于第三层，也就是**网络层**。

网络层的主要作用是：**实现主机与主机之间的通信，也叫点对点（end to end）通信。**

![](https://note.youdao.com/yws/api/personal/file/B69150D56CC641C1A6A7CE69DA33F827?method=download&shareKey=34ba13284d42dbe0e0a336f3c7940c82)

**IP（网络层） 和 MAC（数据链路层）之间的区别和关系：**

**MAC 的作用则是实现「直连」的两个设备之间通信，而 IP 则负责在「没有直连」的两个网络之间进行通信传输。**

![](https://note.youdao.com/yws/api/personal/file/9FF3B3FDF2C34CF585E30A34C093730E?method=download&shareKey=41cd2410aa01727d3ad01cb608e090af)

#### IP 地址的分类

IP 地址分类成了 5 种类型，分别是 A 类、B 类、C 类、D 类、E 类。

![](https://note.youdao.com/yws/api/personal/file/954094E553124033B5EFD9854B6746AA?method=download&shareKey=dc4b10492718896d8221d3ad148fb4af)

计算机程序之间的通讯，通过IP只能锁定计算机，但是无法锁定具体的程序。

通过端口可以锁定计算机上具体的程序，确保程序之间进行沟通。

IP地址相当于小区地址，在小区里有许多住户(程序)，而门牌号(端口)就是各个住户的联系地址。

#### IP抢占

IP抢占是指在一个计算机网络中，一个设备强制占用另一个设备的IP地址的过程。这种情况通常发生在两个设备尝试使用相同的IP地址时，例如在DHCP服务器（动态主机配置协议）出现故障时，可能会分配重复的IP地址。在这种情况下，设备会尝试在网络上请求使用该IP地址，而其他设备则会发现冲突并停止使用该IP地址。

为了解决IP地址冲突问题，网络管理员可以配置IP地址抢占功能。当一个设备出现故障或需要更换时，管理员可以使用抢占功能将其IP地址分配给新设备，并在网络上自动更新路由表和DNS记录，以确保所有设备都可以正确通信。

需要注意的是，IP地址抢占功能可能会对网络安全性产生影响。因为一个设备可以通过占用另一个设备的IP地址来冒充该设备，并可能获得对网络的访问权限。因此，在启用IP地址抢占功能时，网络管理员应该加强网络安全措施，例如使用访问控制列表、防火墙和网络入侵检测系统等技术，以保护网络免受未经授权的访问和攻击。

## 7.DNS

DNS是指域名系统（Domain Name System），它是互联网基础设施的一部分，用于将易于记忆的域名转换为计算机可以理解的IP地址。每个域名都对应着一个或多个IP地址，这些IP地址指向互联网上的计算机或设备，使得用户可以通过域名访问到相应的网站或服务。

当用户在浏览器中输入一个域名时，浏览器会向本地DNS服务器发送一个请求，询问该域名对应的IP地址。如果本地DNS服务器中没有该域名的解析记录，则会向更高级别的DNS服务器请求，并不断向上查询，直到找到该域名对应的IP地址，然后返回给用户的计算机。这个过程被称为域名解析或DNS解析。

DNS还可以用于进行其他任务，如将电子邮件服务器和FTP服务器的域名转换为相应的IP地址。同时，DNS也是一个分布式系统，由许多DNS服务器组成，分为根域名服务器、顶级域名服务器、权威域名服务器和本地DNS服务器等不同类型。

DNS 可以将域名网址自动转换为具体的 IP 地址。

![](https://note.youdao.com/yws/api/personal/file/BDF0E6E3387E42A0B762624722D34773?method=download&shareKey=20796f7b1191ccccb8d51d4802ea09fa)

DNS 域名解析的过程蛮有意思的，整个过程就和我们日常生活中找人问路的过程类似，**只指路不带路**。

## 8.内网外网

内、外网是相对于防火墙而言的，在防火墙内部叫做内网，反之就是外网。

在一定程度上外网等同于公网，内网等同于私网。

地址为如下3个区域就是处于私网：
1：10. * . * .* 
2：172.16. * . *至172.31 . * . *
3：192.168. * . * （*为0到255之间的任意数字）
以上3个区域外的就是处于公网之中了。

**公网地址**是指在因特网上直接可达的地址，如果你有一个公网地址，那就意味着你不但能访问别人，还能被人访问。公网地址是架设各种服务器必不可少的条件。

**私网地址**产生的一个原因是因为公网地址非常缺乏，大家不得不使用同一个公网IP地址上网，这就是共享上网的由来。同样，私网地址仍然可以被再次共享。

## 9.VPN

VPN指的是虚拟私人网络，是一种通过公共网络（如互联网）建立安全连接的技术。它可以在不安全的公共网络上建立加密的通讯通道，确保通讯内容的机密性、完整性和可用性。通过VPN连接到网络，能够实现在不同地点的计算机和网络之间进行数据传输和共享。VPN广泛应用于提供安全的远程访问和加密的数据传输，也可以用于绕过地理位置限制和突破网络审查。常见的VPN技术包括SSL VPN、IPSec VPN、PPTP VPN等。很多企业、组织、政府部门以及个人用户都使用VPN来保护网络通信安全和隐私。

## 10.代理

代理（Proxy）是一种网络服务，充当客户端与其他服务器之间的中间人。当客户端请求访问某个网络资源时，代理服务器接收并转发这些请求，使得客户端不必直接连接目标服务器。代理可以对客户端请求和服务器响应进行处理、缓存、记录等操作，以提高访问速度、安全性和匿名性。

**浏览器代理**就是代理网络用户去取得网络信息。浏览器代理是网络安全和隐私保护的一种方法，它通过代理服务器来代替本地计算机与网络上的其他服务器进行通信。浏览器代理可以修改网络请求和响应，隐藏本地计算机的真实 IP 地址，并使用其他 IP 地址来代表本地计算机与外部网络进行通信。这种方法可以保护个人隐私，提高网络安全性，同时还可以在访问受限网站时绕过访问限制，提高网络访问速度。浏览器代理常用于访问国外网站、翻墙、科学上网等，也可以用于网络爬虫、反爬虫等工作中。

代理服务器是介于浏览器和web 服务器之间的一台服务器，有了它之后浏览器不是直接到web 服务器去取回网页，而是向代理服务器发出请求，请求信号会先送到代理服务器，由代理服务器取回浏览器所需要的信息并传送给你的浏览器。

## 11.网段

网段（也称为子网）是指一个网络中的一部分，它是由一组具有相同网络地址前缀的 IP 地址所组成的。在 IPv4 中，一个 IP 地址由4个字节（32 位）组成，其中前面的一部分用于表示这个 IP 地址所在的网络，后面的一部分用于表示这个地址在该网络中的唯一标识。为了更有效地利用 IP 地址，一个网络可以被划分为多个子网。每个子网都有自己的地址范围和掩码，可以在本地网络内部互相通信。在 Internet 上，所有的子网都必须透过路由器进行连接和通信。网段是计算机网络管理和配置中的常用术语，对于网络的组织、管理和维护都具有重要的意义。

子网掩码就是用来标识IP中32位2进制中有多少位属于网络地址，另一功能是用来划分子网 。

## 12.路由器与交换机

**路由器**是一种网络设备，可将网络流量从一个网络传递到另一个网络。它通过对数据包进行路由选择和路由转发，把来自不同来源的数据包进行转发，并将数据包转发到目标网络的正确端口。路由器可以连接多个设备，并用于连接多个网络，例如将局域网连接到互联网。它可以执行网络地址转换（NAT）以允许多个设备共享一个公共 IP 地址访问互联网。路由器还支持网络安全性功能，例如防火墙、入侵检测和虚拟私人网络（VPN）。路由器是构建互联网的重要设备，也是当今家庭和企业内部网络中不可或缺的一部分。路由器是一个负责分配局域网主机IP地址，连接网内主机和外网的设备，没有设备，主机之间无法通信。

**交换机**是一种网络设备，是将多个机器串联起来形成一个局域网IP，用于连接多个计算机、服务器、网络存储设备和其他网络设备，以便它们可以进行通信。交换机使得局域网内的设备能够快速、安全地交换数据，并且能够控制哪些设备可以与其他设备通信。交换机降低了网络拥堵，提高了网络性能和安全性。

### 区别

1.用途不同

连接的网络种类不同。比如局域网主要是交换机来连接，而外网要用路由器来连接，因为路由器出现时间晚，更具有兼容性，所以也能连接区域网。而一般个人用户对路由器的需求量是不太大的，一般由家庭、公司为单位来使用。

2.功能不同

路由器能串联起来多台电子设备并将IP分配，使多个主机共同使用一个IP，对外却表现出只有一个IP地址。交换机的主要功能是可以把很多主机连起来，这些主机每一个都有自己的IP显示，形成多个ip地址共同工作的场景。

3.工作层次不同

路由器和交换机的区别主要还体现在工作时的层次不同，交换机工作是在第二层也就是OSI模型的数据链路层。而路由器则是在第三层，工作在OSI模型的网络层。主要是因为交换机的原理比路由器较为简单，所以路由器的层级更高，所具有的功能也更广泛。

4.作用不同

交换机和路由器的作用不同：交换机主要用于连接多个设备，使它们可以在同一网络中通信；而路由器则主要用于连接不同的网络，使它们可以相互之间通信。

## 13.网关

网关又称网间连接器、协议转换器，可理解为一个翻译器。顾名思义，网关是一个网络连接到另一个网络的“关口”，也是数据从一个网络流入另一个网络的关口，从功能上看，网关是网络连接设备的重要组成部分，它不仅具有路由的功能，而且能在两个不同的协议集之间进行转换，从而使不同的网络之间实现互联。交换机、路由器和网关都是数据的传递设备，但它们之间存在很大差异。网关既可以用于广域网互连，也可以用于局域网互连。以传递信件到国外为例，交换机为信件的起草提供场所，路由器是把信件按投递规则传递到边境，网关把信件打开并翻译成外国人看懂的信息，传递给外国人。

网关是一个局域网的关口地址，分隔局域网之间的关口，负责转发局域广播，内网、外网数据交换的必经之地，按照网络协议，一个局域网必须设置一个网关。

路由器是硬件设备，网关是网络协议中的一个地址，网关设置之后存储在路由器中，就像主机有了网卡，需要给网卡分配一个IP地址一样。

## 14.NAT网络地址转换

> https://github.com/Snailclimb/JavaGuide/blob/main/docs/cs-basics/network/nat.md

 NAT全称Network Address Translation，是一种在计算机网络中用于将一个IP地址转换为另一个IP地址的技术。

NAT主要用于解决IP地址短缺的问题，它可以将内部网络中的私有IP地址转换成公共IP地址，实现内部网络与外部网络之间的通信。当内部网络中的设备访问互联网时，NAT将私有IP地址替换为公共IP地址，从而保护内部网络的安全。

此外，NAT还可以将一个公共IP地址映射到多个私有IP地址上，从而实现端口转发。这一功能在网络应用中经常用于映射服务器或其他应用程序的端口，以允许公共网络访问私有网络中的应用程序。

## 15.ARP 协议

MAC 地址的全称是 **媒体访问控制地址（Media Access Control Address）**。如果说，互联网中每一个资源都由 IP 地址唯一标识（IP 协议内容），那么一切网络设备都由 MAC 地址唯一标识。

可以理解为，MAC 地址是一个网络设备真正的身份证号，IP 地址只是一种不重复的定位方式（比如说住在某省某市某街道的张三，这种逻辑定位是 IP 地址，他的身份证号才是他的 MAC 地址），也可以理解为 MAC 地址是身份证号，IP 地址是邮政地址。MAC 地址也有一些别称，如 LAN 地址、物理地址、以太网地址等。

ARP 协议，全称 **地址解析协议（Address Resolution Protocol）**，它解决的是网络层地址和链路层地址之间的转换问题。因为一个 IP 数据报在物理上传输的过程中，总是需要知道下一跳（物理上的下一个目的地）该去往何处，但 IP 地址属于逻辑地址，而 MAC 地址才是物理地址，ARP 协议解决了 IP 地址转 MAC 地址的一些问题。